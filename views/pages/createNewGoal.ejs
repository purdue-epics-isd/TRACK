<!DOCTYPE html>
<html>

<head>
  <title>HOME</title>
  <link rel="stylesheet" href="/css/global.css" />
  <link rel="stylesheet" href="/css/createNewGoal.css" />
</head>

<body>
  <%- include("navbar.ejs")%>
    <!-- This form allows you to submit the goal information to create a new goal -->
    <form action="/student/<%= student.id%>/goal/create" method="post" class="sectionOne">
      <!-- Goal Name and Description-->
      <h2>GOAL</h2>
      <input type="text" name="name" placeholder="Goal Name" />
      <textarea rows="4" cols="50" type="text" name="description" placeholder="Goal Description"></textarea>

      <!-- Dates -->
      <h2>DATES</h2>
      <input type="date" placeholder="Start Date" id="startDate" name="startDate">
      <input type="date" placeholder="End Date" id="endDate" name="endDate">

      <!-- Goal Type -->
      <h2>GOAL TYPE</h2>
      <div class="goalType" id="goalType">
        <input type="radio" id="Academic" name="goalType" value="Academic">
        <label for="Academic">Academic</label>
        <input type="radio" id="Behavior" name="goalType" value="Behavior">
        <label for="Behavior">Behavior</label>
      </div>

      <!-- Method of Collection -->
      <h2>METHOD OF COLLECTION</h2>
      <div class="methodOfCollection" name="methodOfCollection">
        <input type="radio" id="score" name="methodOfCollection" onclick="disappear()" value="score">
        <label for="score">Score</label>
        <input type="radio" id="count" name="methodOfCollection" onclick="disappear()" value="count">
        <label for="count">Occurences</label>
        <input type="radio" id="description" name="methodOfCollection" onclick="disappear()" value="description">
        <label for="description">Description</label>
        <input type="radio" id="rubric" name="methodOfCollection" onclick="appear()" value="rubric">
        <label for="rubric">Rubric</label>
        <input type="hidden" name="methodOfCollection" value="comments" id="comments"></input>
      </div>

      <div class="rubricLayout" name="rubricLayout" id="rubricLayout">
        <h2>RUBRIC</h2>
        <h3>Description for Not Evident</h3>
        <textarea rows="1" cols="50" type="text" name="Rnotevident"
          placeholder="Description for Not Evident"></textarea>
        <h3>Description for Introduced</h3>
        <textarea rows="1" cols="50" type="text" name="Rintroduced" placeholder="Description for Introduced"></textarea>
        <h3>Description for Emerging</h3>
        <textarea rows="1" cols="50" type="text" name="Remerging" placeholder="Description for Emerging"></textarea>
        <h3>Description for Developing</h3>
        <textarea rows="1" cols="50" type="text" name="Rdeveloping" placeholder="Description for Developing"></textarea>
        <h3>Description for Ongoing</h3>
        <textarea rows="1" cols="50" type="text" name="Rongoing" placeholder="Description for Ongoing"></textarea>
        <h3>Description for Demonstrated</h3>
        <textarea rows="1" cols="50" type="text" name="Rdemonstrated"
          placeholder="Description for Demonstrated"></textarea>
        <h3>Description for Applied</h3>
        <textarea rows="1" cols="50" type="text" name="Rapplied" placeholder="Description for Applied"></textarea>
      </div>
      </div>

      <!-- This script controls whether the different rubric fields are shown -->
      <script>
        function appear() {
          document.getElementById("rubricLayout").style.display = "block";
        }

        function disappear() {
          document.getElementById("rubricLayout").style.display = "none";
        }
      </script>
      <button id="submit" class="submit">Submit</button>
      <input type="hidden" name="userID" id="userID">
    </form>
    </section>
</body>

</html>

<script>
  //sorry this is a super jank way of getting user ID but its OKAY
  document.getElementById("userID").value = localStorage.getItem("username");
</script>

<!-- These TWO scripts are used to make the date picker in Safari since it doesn't have a native one -->
<script type="text/javascript">
  var datefield = document.createElement("input")
  datefield.setAttribute("type", "date")
  if (datefield.type != "date") { //if browser doesn't support input type="date", load files for jQuery UI Date Picker
    document.write('<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />\n')
    document.write('<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"><\/script>\n')
    document.write('<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"><\/script>\n')
  }
</script>

<script type="text/javascript">
  if (datefield.type != "date") { //if browser doesn't support input type="date", initialize date picker widget:
    jQuery(function ($) { //on document.ready
      $('#startDate').datepicker();
      $('#endDate').datepicker();
    })
  }
</script>

    <script>
      var submitbutton = document.getElementById("submit");

      	submitbutton.onclick = function() {
      		if (localStorage.getItem("tutorialtoggle") == 1) {
      			localStorage.setItem("studentprofiletoggle", "1");
      		}
      	}
      
     </script>


<!-- Fifth Popup: Create New Goal -->
    <div id="tutorial2" class="tutorial">
      <div class="tutorialContent">
        <p style="font-weight: bold;" >Tutorial</p>
        <p>Fill out each field below to configure the new goal. Click on "Hide" to hide the tutorial box if needed.</p>
        <span class="exit">EXIT</span>
        <span class="next">HIDE</span>
      </div>
    </div>

    <script>
      var tutorial2 = document.getElementById("tutorial2");
      var exit = document.getElementsByClassName("exit")[0];
      var hide = document.getElementsByClassName("next")[0];

      if (localStorage.getItem("tutorialtoggle") == "1") {
        tutorial2.style.display = "block";
      }

      if (localStorage.getItem("tutorialtoggle") == "0") {
        tutorial2.style.display = "none";
      }

      hide.onclick = function() {
        tutorial2.style.display = "none";
      }

      exit.onclick = function() {
        localStorage.setItem("tutorialtoggle", "0");
        localStorage.setItem("studentprofiletoggle", "0");
        tutorial2.style.display = "none";
      }
    </script>
